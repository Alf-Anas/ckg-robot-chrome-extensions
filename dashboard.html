<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>CKG Robot Dashboard</title>
        <link href="lib/bootstrap.min.css" rel="stylesheet" />
        <script src="lib/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="style.css" />
    </head>
    <body class="p-3 position-relative">
        <h3 class="text-primary">ðŸ¤– CKG Robot Dashboard</h3>
        <p class="text-muted">History and Logs</p>

        <div
            style="
                position: absolute;
                top: 10px;
                right: 10px;
                text-align: center;
            "
        >
            <a
                href="https://trakteer.id/alf-anas"
                target="_blank"
                style="display: inline-block; margin-bottom: 5px"
            >
                <img
                    src="https://cdn.trakteer.id/images/embed/trbtn-red-1.png"
                    alt="Trakteer Saya"
                    style="max-height: 50px; max-width: 181px"
                    loading="lazy"
                />
            </a>
            <div style="font-size: 13px; color: #555">
                Created by <strong>Alf-Anas</strong> |
                <a
                    href="https://geoit.dev"
                    target="_blank"
                    style="color: #007bff; text-decoration: none"
                >
                    geoit.dev
                </a>
            </div>
        </div>

        <h5 class="text-success">Aktif Data</h5>
        <div
            class="table-responsive"
            style="max-height: 400px; overflow-y: auto; overflow-x: auto"
        >
            <table
                class="table table-bordered table-striped table-sm table-compact"
            >
                <thead class="table-dark">
                    <tr>
                        <th>No</th>
                        <th>NIK</th>
                        <th>Nama</th>
                        <th>Tgl Lahir</th>
                        <th>Jenis Kelamin</th>
                        <th>Status Input</th>
                        <th>Keterangan</th>
                        <th>Daftar</th>
                        <th>Hadir</th>
                        <th>Pemeriksaan</th>
                        <th>Rapor</th>
                    </tr>
                </thead>
                <tbody id="dataBody">
                    <!-- Data akan dimasukkan lewat JS -->
                </tbody>
            </table>
        </div>
        <hr />

        <div class="accordion my-2" id="accordionSummary">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingSummary">
                    <button
                        class="accordion-button"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#collapseSummary"
                        aria-controls="collapseSummary"
                    >
                        Ringkasan
                    </button>
                </h2>
                <div
                    id="collapseSummary"
                    class="accordion-collapse"
                    aria-labelledby="headingSummary"
                    aria-expanded="true"
                    data-bs-parent="#accordionSummary"
                >
                    <div class="accordion-body show">
                        <div id="summary"></div>
                    </div>
                </div>
            </div>
        </div>

        <hr />
        <h5 class="text-success">Logs</h5>
        <div
            class="table-responsive"
            style="max-height: 400px; overflow-y: auto; overflow-x: auto"
        >
            <table
                class="table table-bordered table-striped table-sm table-compact"
            >
                <thead class="table-dark">
                    <tr>
                        <th>No</th>
                        <th>NIK</th>
                        <th>Nama</th>
                        <th>Tgl Lahir</th>
                        <th>Jenis Kelamin</th>
                        <th>No WA</th>
                        <th>Tgl Pemeriksaan</th>
                        <th>Status Input</th>
                        <th>Keterangan</th>
                        <th>Daftar</th>
                        <th>Hadir</th>
                        <th>Pemeriksaan</th>
                        <th>Rapor</th>
                    </tr>
                </thead>
                <tbody id="dataBodyLogs">
                    <!-- Data akan dimasukkan lewat JS -->
                </tbody>
            </table>
        </div>

        <div class="d-flex gap-2 mb-2">
            <button id="downloadExcelLogBtn" class="btn btn-secondary w-100">
                Download History
            </button>
            <button id="downloadExcelBtn" class="btn btn-success w-100">
                Download File Excel
            </button>
        </div>
        <div class="w-100 text-end">
            <button
                class="btn btn-danger btn-sm mb-2"
                data-bs-toggle="modal"
                data-bs-target="#clearModal"
            >
                Hapus Data
            </button>
        </div>

        <!-- Modal -->
        <div
            class="modal fade"
            id="clearModal"
            tabindex="-1"
            aria-labelledby="clearModalLabel"
            aria-hidden="true"
        >
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="clearModalLabel">
                            Hapus Data Logs?
                        </h1>
                        <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                        ></button>
                    </div>
                    <div class="modal-body">
                        Anda yakin ingin menghapus data logs dan memulai robot
                        dari awal?
                        <br />
                        Data yang sudah dihapus tidak dapat dikembalikan,
                        pastikan Anda sudah mendownload File Excelnya!
                    </div>
                    <div class="modal-footer">
                        <button
                            type="button"
                            class="btn btn-secondary"
                            data-bs-dismiss="modal"
                        >
                            Batal
                        </button>
                        <button
                            type="button"
                            class="btn btn-danger"
                            id="clearDataBtn"
                        >
                            Bersihkan
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <hr />
        <pre id="output" class="bg-light p-2 rounded small"></pre>

        <script src="lib/xlsx.full.min.js"></script>
        <script src="scripts/common.js"></script>
        <script src="scripts/dashboard.js"></script>
    </body>
</html>
